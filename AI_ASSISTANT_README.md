# AI智能助手功能说明

## 功能特性

✨ **智能悬浮助手**：页面右侧悬浮的AI助手，支持拖拽移动
🤖 **DeepSeek AI集成**：接入DeepSeek API，提供专业的茶园管理建议
📊 **页面数据分析**：能够分析当前页面的数据并提供智能建议
💬 **实时对话**：支持与AI助手进行实时对话交流
🎯 **专业领域**：专门针对茶园管理、病虫害诊断、生产优化等场景

## 使用方法

1. **启动助手**：点击页面右侧的机器人图标
2. **拖拽移动**：按住机器人头像可以拖拽到任意位置
3. **分析页面**：点击"分析当前页面"按钮，AI会自动分析当前页面数据
4. **自由对话**：在输入框中输入问题，按回车或点击发送按钮

## DeepSeek API配置

### 获取API密钥

1. 访问 [DeepSeek官网](https://www.deepseek.com/)
2. 注册账号并登录
3. 进入API管理页面
4. 创建新的API密钥

### 配置步骤

1. 打开 `backend/server.js` 文件
2. 找到第18行的API密钥配置：
   ```javascript
   'Authorization': 'Bearer sk-your-deepseek-api-key'
   ```
3. 将 `sk-your-deepseek-api-key` 替换为您的实际API密钥
4. 保存文件并重启后端服务器

### 环境变量配置（推荐）

为了安全起见，建议使用环境变量存储API密钥：

1. 在项目根目录创建 `.env` 文件：
   ```
   DEEPSEEK_API_KEY=your-actual-api-key-here
   ```

2. 修改 `backend/server.js` 中的配置：
   ```javascript
   'Authorization': `Bearer ${process.env.DEEPSEEK_API_KEY}`
   ```

3. 安装dotenv包：
   ```bash
   cd backend
   npm install dotenv
   ```

4. 在server.js顶部添加：
   ```javascript
   require('dotenv').config();
   ```

## 功能说明

### 智能分析功能

- **首页分析**：分析茶园整体健康状况、病虫害分布、检测趋势
- **监控页面**：分析环境监控数据、预警信息
- **生产页面**：分析生产任务、进度情况
- **销售页面**：分析销售数据、市场趋势

### 备用回复系统

当DeepSeek API不可用时，系统会自动启用备用回复系统，根据关键词提供相关建议：

- 病虫害相关问题
- 生产管理建议
- 环境监控指导
- 销售分析建议

## 技术实现

### 前端组件
- **Vue 3 Composition API**：现代化的组件开发
- **拖拽功能**：原生JavaScript实现的拖拽交互
- **响应式设计**：适配不同屏幕尺寸
- **动画效果**：流畅的交互动画

### 后端接口
- **Express.js**：RESTful API服务
- **DeepSeek API集成**：专业AI对话服务
- **错误处理**：完善的异常处理机制
- **备用回复**：离线智能回复系统

## 注意事项

1. **API密钥安全**：请妥善保管您的DeepSeek API密钥，不要提交到版本控制系统
2. **网络连接**：确保服务器能够访问DeepSeek API服务
3. **费用控制**：DeepSeek API按使用量计费，请注意控制使用频率
4. **数据隐私**：敏感数据在发送给AI前请做适当处理

## 故障排除

### 常见问题

1. **AI助手不显示**
   - 检查前端服务是否正常运行
   - 确认AIAssistant组件已正确导入

2. **API调用失败**
   - 检查API密钥是否正确配置
   - 确认网络连接正常
   - 查看后端服务器日志

3. **拖拽功能异常**
   - 检查浏览器兼容性
   - 确认没有CSS冲突

### 日志查看

- 前端日志：浏览器开发者工具 Console
- 后端日志：终端输出或日志文件

## 更新日志

- **v1.0.0**：初始版本，基础AI对话功能
- 支持拖拽移动
- 集成DeepSeek API
- 页面数据分析功能
- 备用回复系统

---

如有问题或建议，请联系开发团队。